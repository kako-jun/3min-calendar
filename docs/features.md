# 主要機能

## カレンダー表示（CalendarGrid.tsx）

- 5〜6行7列の可変グリッド（月によって行数変動、aspect-square）
- テーマカラーに完全対応（インラインstyle）
- 祝日は日曜色で表示（showHolidays有効時）
- 店名・店名ロゴをカレンダー上部に表示
- 六曜表示対応（各日付の右上に小さく表示）
- 和暦表示対応（年月表示を令和等に切替）
- 選択枠アニメーション（グリッド外配置でoverflow-hidden回避）

## 定型入力（QuickInputButtons.tsx）

| ボタン | 日本語 | 英語   | 用途       |
| ------ | ------ | ------ | ---------- |
| 休     | 休     | Closed | 定休日     |
| ◯      | ◯      | ◯      | 空きあり   |
| △      | △      | △      | 残りわずか |
| ✕      | ✕      | ✕      | 予約済み   |
| 満     | 満     | Full   | 満席/満室  |

## 画像キャプチャ（capture.ts）

- **重要**: ブラウザ表示と出力画像が完全一致すること
- Canvas（Konva Stage.toDataURL()）で描画内容を直接画像化
- ブラウザの許可ダイアログ不要で安定動作
- Web Share API対応時はシェア、非対応時はクリップボードコピー

## 日エディタ（DayEditor.tsx / DayRow.tsx）

- 通常モード: 選択日の前後1日を含む3日表示（アニメーション付き）
- 全日表示モード: 月の全日をスクロール可能なリストで表示
- IME入力対応（compositionstart/compositionend）
- コピー＆ペースト機能（日のデータを別の日にコピー）
- 絵文字ピッカー（カテゴリ別に整理）
- 時刻入力（30分刻みのセレクトボックス）

## 設定パネル（SettingsPanel.tsx）

- アプリテーマ（ライト/ダーク）
- 言語切り替え（日本語/英語）
- 国/地域選択（祝日判定用、20カ国）
- 店名入力・店名ロゴ設定
- 背景画像・透明度設定
- 祝日表示ON/OFF
- 週の開始日（日曜/月曜）
- 六曜表示ON/OFF（日本の飲食店・美容室向け）
- 和暦表示ON/OFF（年配向けサービス向け）
- データ管理（エクスポート/インポート）

## カレンダーテーマ選択（CalendarThemeSelector.tsx）

- 月ごとにカレンダーテーマを設定可能
- 14種類のプリセット（ライト系7色 + ダーク系7色の虹配色）
- グリッドスタイル選択（角丸/罫線）
- 未設定の月はデフォルト（light）を使用

## 六曜・和暦（rokuyo.ts / wareki.ts）

- **六曜**: 旧暦から計算（先勝・友引・先負・仏滅・大安・赤口）
- **和暦**: 明治以降の元号に対応（明治・大正・昭和・平成・令和）
- 月選択は令和元年5月（2019年5月）以降に制限

## QRコード生成（QRPage.tsx）

- URLを入力してQRコードを生成
- PC時は2カラムレイアウト（左: QRプレビュー、右: 設定）
- スタイル選択（四角/ドット/流体）
- 目の形状選択（四角/角丸/円形）- 自動計算で最適な角丸半径
- 色のカスタマイズ（背景色・前景色・背景透過）
- 中央ロゴ画像の挿入（アスペクト比を維持）
- サイズ選択（128/256/512px）
- エラー訂正レベルは常にH（最大）で固定
- 画像ダウンロード・シェア機能
- プライバシー重視（サーバー送信なし、Made in Japan）
